(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{8370:function(e,t,n){Promise.resolve().then(n.bind(n,2956))},2956:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(7437),r=n(2265),o=n(8672),i=n(6853),a=n(1249),c=n(5934),l=n(4449);function d(){let e=(0,i.useStripe)(),t=(0,i.useElements)(),{data:n}=(0,c.kP)(),[o,a]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!e)return;let t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then(e=>{let{paymentIntent:t}=e;switch(t.status){case"succeeded":a("Payment succeeded!");break;case"processing":a("Your payme+nt is processing.");break;case"requires_payment_method":a("Your payment was not successful, please try again.");break;default:a("Something went wrong.")}})},[e]);let f=async s=>{if(s.preventDefault(),!e||!t)return;u(!0);let{error:r}=await e.confirmPayment({elements:t,confirmParams:{return_url:"http://localhost:3000/",receipt_email:n.user.email}});"card_error"===r.type||"validation_error"===r.type?a(r.message):a("An unexpected error occurred."),u(!1)};return(0,s.jsxs)("form",{id:"payment-form",onSubmit:f,className:"p-12 flex flex-col justify-center gap-4 items-center",children:[(0,s.jsx)(i.PaymentElement,{id:"payment-element",options:{layout:"tabs"},className:"w-full"}),(0,s.jsx)(i.AddressElement,{id:"address-element",options:{mode:"shipping"},className:"w-full"}),d?(0,s.jsx)("div",{className:"spinner",id:"spinner"}):(0,s.jsx)(l.z,{disabled:!0,id:"submit",className:"w-full",children:"Pay"})]})}var u=n(8719),f=n(8508);let p=(0,o.J)("pk_test_51N4GXWIfDBWEGt9putEjLbRgNinQRfzyF2KX2fwgFH1DuQ0ZEYR1INzTmq442mLz52m6pPKDqWzjvaV4aZIlZOQb0056wkABPF");function m(){let[e,t]=(0,r.useState)(""),{items:n}=(0,a.x)(e=>e.items);return(0,r.useEffect)(()=>{(async e=>{let{items:n}=e,s=await fetch("api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n})});console.log(n);let r=await s.json();console.log(r),t(r.clientSecret)})({items:n})},[]),(0,s.jsxs)("main",{className:"container mx-auto min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 px-6 md:px-8 py-20",children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(f.Z,{})]}),e&&(0,s.jsx)(i.Elements,{options:{clientSecret:e,appearance:{theme:"night",variables:{fontFamily:"Roboto, sans-serif",fontLineHeight:"1.5",borderRadius:"25",colorBackground:"#020817",focusBoxShadow:"none",colorPrimary:"#eb5e33",iconColor:"ff900",tabIconSelectedColor:"white",logoColor:"dark",tabLogoColor:"dark"},rules:{".Input, .CheckboxInput, .CodeInput":{transition:"none",boxShadow:"inset -1px -1px #b5b5b5, inset 1px 1px #0a0a0a, inset -2px -2px #dfdfdf, inset 2px 2px #808080"},".Label":{color:"#dbdbc6"},".Input":{padding:"12px",width:"10px",boxShadow:"inset 0 0 0 1px #27272a"},".Input--invalid":{color:"#DF1B41"},".Tab, .Block, .PickerItem--selected":{boxShadow:"inset 0 0 0 1px #27272a"},".Tab":{backgroundColor:"#020817",transition:"none"},".TabLabel":{color:"curretnColor"},".Tab:hover":{borderColor:"#eb5e33",backgroundColor:"#020817",color:"#eb5e33"},".Tab--selected, .Tab--selected:focus, .Tab--selected:hover":{color:"#dbdbc6",backgroundColor:"#020817"},".PickerItem":{backgroundColor:"#dfdfdf",boxShadow:"inset -1px -1px #0a0a0a, inset 1px 1px #ffffff, inset -2px -2px #808080, inset 2px 2px #dfdfdf",transition:"none"},".PickerItem:hover":{backgroundColor:"#eee"},".PickerItem--highlight":{outline:"1px solid blue"},".PickerItem--selected:hover":{backgroundColor:"#dfdfdf"}}}},stripe:p,children:(0,s.jsx)(d,{})})]})}},8719:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437),r=n(1249);let o=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function i(){let e=(0,r.x)(e=>e.items);return(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"flex-1",children:[o(e.name)," -"," ",o(e.color),", ",e.size,(0,s.jsxs)("span",{className:"text-gray-500",children:[" x",e.quantity]})]}),(0,s.jsxs)("span",{children:["$",(e.price*e.quantity).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["$",e.price.toFixed(2)," each"]})]},"".concat(e.id,"-").concat(e.color,"-").concat(e.size)))})}},8508:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(7437),r=n(1249);function o(){let e=(0,r.x)(e=>e.discount),t=(0,r.x)(e=>e.total),n=(0,r.x)(e=>e.subtotal);return(0,s.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["$",n.toFixed(2)]})]}),e>0&&(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Discount"}),(0,s.jsxs)("span",{children:["-$",(n*e).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",t&&t.toFixed(2)]})]})]})}},4449:function(e,t,n){"use strict";n.d(t,{d:function(){return c},z:function(){return l}});var s=n(7437),r=n(2265),o=n(8482),i=n(535),a=n(6474);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:l=!1,...d}=e,u=l?o.g7:"button";return(0,s.jsx)(u,{className:(0,a.cn)(c({variant:r,size:i,className:n})),ref:t,...d})});l.displayName="Button"},6474:function(e,t,n){"use strict";n.d(t,{cn:function(){return o}});var s=n(1994),r=n(3335);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}},1249:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var s=n(3011),r=n(6885);let o=(0,s.U)((0,r.tJ)((e,t)=>({items:[],total:0,discount:0,subtotal:0,setDiscount:n=>{e({discount:n}),e({total:t().subtotal*n})},clearDiscount:()=>e({discount:0}),calculateTotal:()=>{e({subtotal:t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),e({total:t().subtotal-t().discount})},addToCart:t=>e(e=>{let n=e.items.find(e=>e.id===t.id&&e.color===t.color&&e.size===t.size);return n?{items:e.items.map(e=>e===n?{...e,quantity:e.quantity+1}:e)}:{items:[...e.items,t]}}),removeFromCart:t=>e(e=>({items:e.items.filter(e=>!(e.id===t.id&&e.color===t.color&&e.size===t.size))})),updateQuantity:(t,n)=>e(e=>({items:e.items.map(e=>e.id===t.id&&e.color===t.color&&e.size===t.size?{...e,quantity:n}:e)})),clearCart:()=>e({items:[]}),getTotal:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),{name:"cart-storage",getStorage:()=>localStorage}))}},function(e){e.O(0,[969,934,580,971,117,744],function(){return e(e.s=8370)}),_N_E=e.O()}]);